<style>

	.r-button {
		--uirButtonBackgroundColor: var(--rButtonBackgroundColor, transparent);
		--uirButtonPadding: var(--rButtonPadding, var(--rButtonPaddingTop, 0) var(--rButtonPaddingRight, 0) var(--rButtonPaddingBottom, 0) var(--rButtonPaddingLeft, 0));
		--uirButtonBorderWidth: var(--rButtonBorderWidth, 0);
		--uirButtonBorderStyle: var(--rButtonBorderStyle, solid);
		--uirButtonBorderColor: var(--rButtonBorderColor, currentColor);
		--uirButtonFontFamily: var(--rButtonFontFamily, inherit);
		--uirButtonFontSize: var(--rButtonFontSize, inherit);
		--uirButtonColor: var(--rButtonColor);

		background-color: var(--uirButtonBackgroundColor);
		padding: var(--uirButtonPadding);

		border-width: var(--uirButtonBorderWidth);
		border-style: var(--uirButtonBorderStyle);
		border-color: var(--uirButtonBorderColor);

		cursor: pointer;

		font-family: var(--uirButtonFontFamily);
		font-size: var(--uirButtonFontSize);
	}

	.r-button::-moz-focus-inner,
	.r-button[type="button"]::-moz-focus-inner,
	.r-button[type="reset"]::-moz-focus-inner,
	.r-button[type="submit"]::-moz-focus-inner {
		border-style: none;
		padding: 0;
	}

	.r-link {
		--uirLinkDisplay: var(--rLinkDisplay, inline-flex);
		--uirLinkTextColor: var(--rLinkTextColor);
		--uirLinkTextDecoration: var(--rLinkTextDecoration, none);

		display: var(--uirLinkDisplay) !important;
		color: var(--uirLinkTextColor) !important;
		text-decoration: var(--uirLinkTextDecoration) !important;
	}

	.r-list {
		--uirListPaddingLeft: var(--rListPaddingLeft, 0);
		--uirListMarginTop: var(--rListMarginTop, 0);
		--uirListMarginBottom: var(--rListMarginBottom, 0);
		--uirListListStyle: var(--rListListStyle, none);

		padding-left: var(--uirListPaddingLeft) !important;
		margin-top: var(--uirListMarginTop) !important;
		margin-bottom: var(--uirListMarginBottom) !important;
		list-style: var(--uirListListStyle) !important;
	}

	.m-hamburger {
		--uiHamburgerDisplay: var(--hamburgerDisplay, inline-flex);
		--uiHamburgerWidth: var(--hamburgerWidth, 28px);
		--uiHamburgerHeight: var(--hamburgerHeight, 20px);
		--uiHamburgerThickness: var(--hamburgerThickness, 4px);
		--uiHamburgerBorderRadius: var(--hamburgerBorderRadius, 5px);
		--uiHamburgerBgColor: var(--hamburgerBgColor, currentColor);

		display: var(--uiHamburgerDisplay);
		width: var(--uiHamburgerWidth);
		height: var(--uiHamburgerHeight);

		position: relative;
		text-indent: -9999px;
	}

	.m-hamburger::before,
	.m-hamburger::after,
	.m-hamburger__label {
		width: 100%;
		height: var(--uiHamburgerThickness);
		border-radius: var(--uiHamburgerBorderRadius);
		background-color: var(--uiHamburgerBgColor);

		position: absolute;
		left: 0;
	}

	.m-hamburger::before,
	.m-hamburger::after {
		content: "";
	}

	.m-hamburger::before {
		top: 0;
	}

	.m-hamburger::after {
		bottom: 0;
	}

	.m-hamburger__label {
		/* The calculation of middle hamburger button line position */

		top: calc(50% - calc(var(--uiHamburgerThickness) / 2));
	}

	.menu {
		--uiMenuCircleSize: var(--menuCircleSize, 100px);
		--uiMenuCircleOffset: var(--menuCircleOffset, 10px);
		--uiMenuCircleBgColor: var(--menuCircleBgColor, currentColor);

		--hamburgerWidth: var(--menuHamburgerWidth, 28px);
		--hamburgerHeight: var(--menuHamburgerHeight, 20px);
		--hamburgerBgColor: var(--menuHamburgerBgColor, #fff);

		box-sizing: border-box;
		width: 100%;

		display: flex;
		flex-direction: column;
		align-items: center;

		position: fixed;
		bottom: 0;
		left: 0;
		z-index: 9998;
	}

	.menu__nav {
		box-sizing: border-box;
		width: 100%;
		height: 0;

		transition: opacity .2s ease-out;
		opacity: 0;

		display: flex;
		align-items: flex-end;
		z-index: 2;
	}

	.menu__list {
		width: 100%;
		max-height: 100%;
		display: none;

		overflow-y: auto;
		-webkit-overflow-scrolling: touch;
	}

	.menu__toggle {
		box-sizing: border-box;
		width: var(--uiMenuCircleSize);
		height: calc(var(--uiMenuCircleSize) / 2);
		padding: var(--uiMenuCircleOffset);

		flex: none;

		position: relative;
		display: flex;
		align-items: flex-end;
		justify-content: center;
	}

	.menu__toggle::before {
		/*
  1. The font-size property is used to simplify calculations of the element's sizes and position
  2. The negative value for the bottom property need for hiding half of circle. 
  */

		content: "";
		width: 1em;
		height: 1em;
		font-size: var(--uiMenuCircleSize);
		/* 1 */

		background-color: var(--uiMenuCircleBgColor);
		border-radius: 50%;

		position: absolute;
		bottom: -.5em;
		/* 2 */
		left: calc(50% - .5em);

		will-change: width, height;
		transition: transform .25s cubic-bezier(0.04, -0.1, 0.29, 0.98),
			width .25s cubic-bezier(0.04, -0.1, 0.29, 0.98),
			height .25s cubic-bezier(0.04, -0.1, 0.29, 0.98);
	}

	.menu__hamburger::before {
		/* Increase of click button area   */

		content: "";
		width: 100%;
		height: 100%;

		position: absolute;
		top: 0;
		left: 0;
	}

	.m-hamburger::before,
	.m-hamburger::after,
	.m-hamburger__label {
		transition-timing-function: ease;
		transition-duration: .15s;
	}

	.m-hamburger::before,
	.m-hamburger::after {
		transition-property: transform;
	}

	.m-hamburger__label {
		transition-property: transform, opacity;
	}

	.menu__hamburger:focus {
		outline: none;
	}

	.menu_activated {
		height: 100%;
	}

	.menu_activated .menu__nav {
		height: 100%;
		opacity: 1;

		will-change: opacity;
		transition-duration: .2s;
		transition-delay: .3s;
	}

	.menu_activated .menu__toggle::before {
		width: 100vmax;
		height: 100vmax;
		transform: translate3d(-50vh, -50vh, 0) scale(5);
		transition-duration: 1s;
	}

	.menu_activated .menu__list {
		display: block;
	}

	.menu_activated .m-hamburger::before {
		top: 50%;
		transform: translate3d(0, -50%, 0) rotate(45deg);
	}

	.menu_activated .m-hamburger::after {
		transform: translate3d(0, -50%, 0) rotate(135deg);
		top: 50%;
	}

	.menu_activated .m-hamburger__label {
		transform: rotate(-45deg) translate3d(-.285em, -.3em, 0);
		opacity: 0;
	}

	:root {
		--colorText: #fff;
		--colorMain: #4557bb;
		--rLinkTextColor: var(--colorMain);
		--menuCircleSize: 100px;
		--menuCircleBgColor: var(--colorMain);
		--menuHamburgerWidth: 28px;
		--menuHamburgerHeight: 20px;
		--menuHamburgerBgColor: var(--colorText);
	}

	@media (min-width: 768px) {

		html {
			font-size: 62.5%;
		}
	}

	@media (max-width: 767px) {

		html {
			font-size: 50%;
		}
	}

	body {
		display: flex;
		height: 100vh;
		margin: 0;
		font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Open Sans, Ubuntu, Fira Sans, Helvetica Neue, sans-serif;
		font-size: 1.6rem;
	}

	.page {
		max-width: 380px;
		padding: 10px;
		margin: auto;
		text-align: center;
	}

	.page__name {
		display: block;
		font-size: 3rem;
		font-weight: 700;
	}

	.page__hint {
		display: block;
		line-height: 1.45;
		margin-top: 1rem;
	}

	.menu__group {
		--rLinkTextColor: var(--colorText);

		padding: .5rem 3rem;
		font-size: 3.2rem;
		font-weight: 700;
		text-transform: uppercase;
	}

</style>

<div class="page">
	<div class="content" style="padding:0px">
		<div id="i_frame">
			<!-- Div pour inclure les écrans de design dans une iframe -->
		</div>
	</div>
</div>

<div class="menu">
	<nav class="menu__nav">
		<ul class="r-list menu__list" id="menu_items">
		</ul>
	</nav>
	<div class="menu__toggle">
		<button class="r-button menu__hamburger">
			<span class="m-hamburger">
				<span class="m-hamburger__label">Open menu</span>
			</span>
		</button>
	</div>
</div>

<script language="javascript">
	// Valeurs par défaut (valeurs utilisées si non précisées dans le json de configuration ci-dessous)
	// A modifier seulement en connaissance de cause : il est préférable d'utiliser le paramétrage Json ci-dessous
	// *** NE PAS MODIFIER ***
	var defaultFrameWidth = 1080;
	var defaultIframHeight = 580;
	var waitForLoadingFrame = 1; // ms
	var menuBackgroundColor = "";
	var menuTextColor = "";

	// pour chaque item du menu renseigner les différents champs :
	// - label : libellé du champ à afficher dans le menu
	// - link : identifiant du design destinataire du lien du menu
	//
	// Gestion des liens dans une iframe : mettre iframe à yes et définir sa largeur et sa hauteur
	// - "iframe": "yes"
	// - "frameWidth": "1024px"
	// - "frameHeight": "580px"
	//
	// *** PREMIERE UTILISATION ***
	// - Recopier sous /data/custom le dossier /themes
	// (à récupérer ici : https://github.com/NextDom/nextdom-theme-design/tree/master/menuMobileFS)
	// - Copier le contenu de ce fichier dans une page de design (clic droit, sélectionner "Edition", puis clic droit, sélectionner "Ajout texte/html")
	//
	// JSON de configuration à modifier pour personnaliser son menu :
	// *** DEBUT DES MODIFICATIONS PAR L'UTILISATEUR ***
	var json_theme_mobile_fs = {
		"page":[
			{"label":"Accueil","link":"1"},
			{"label":"Cuisine","link":"2"},
			{"label":"Salon","link":"3"},
			{"label":"Séjour","link":"4"},
			{"label":"Chambre","link":"5"},
			{"label":"Garage","link":"6"}
		],
	    "iframe": "yes", // (facultatif) gestion de la navigation par frame
	    "frameWidth": "1024px", // (facultatif) largeur de la frame
	    "frameHeight": "580px", // (facultatif) hauteur de la frame
	    "timeout": "1", // (facultatif) temps d'attente (en ms) avant chargement de la frame au lancement du menu (0 : pas de chargement au lancement)
		"menuBackgroundColor": "#4557bb", // (facultatif) détermine la couleur de fond du menu
		"menuTextColor": "#ffffff" // (facultatif) détermine la couleur du texte du menu
	}

	// *** FIN DES MODIFICATIONS ***
	
	function initMenuColors() {
		// TODO : vérifier le format de la couleur (#XXXXXX)
		if (typeof json_theme_mobile_fs["menuBackgroundColor"] !== undefined) {
			document.documentElement.style.setProperty('--colorMain', json_theme_mobile_fs["menuBackgroundColor"]);
		}
		if (typeof json_theme_mobile_fs["menuTextColor"] !== undefined) {
			document.documentElement.style.setProperty('--colorText', json_theme_mobile_fs["menuTextColor"]);
		}
	}

	function loadFrame() {
		if ((typeof json_theme_mobile_fs["iframe"] !== undefined) && (json_theme_mobile_fs["iframe"] === "yes")) {
			gotoPlan(homeLink);
		}
	}

	$(document).ready(function () {
		// gestion par frame : affichage du premier lien au chargement
		if (waitForLoadingFrame != 0) {
			setTimeout(loadFrame, waitForLoadingFrame);
		}
	});

	// url de page d'accueil (premier lien du menu récupéré dynamiquement)
	var homeLink = "";

	function getUrlDestination(urlParam) {
		if (isNaN(urlParam)) {
			return urlParam;
		} else {
			return 'index.php?v=d&p=plan&plan_id=' + urlParam + '&fullscreen=1';
		}
	}

	// Affichage du plan idPlan
	function gotoPlan(idPlan) {

		let frame_destination = document.getElementById('iframe_a');
		let urlDestination = getUrlDestination(idPlan);
		document.querySelector('.menu').className="menu";

		if (isNaN(idPlan)) {
			// url externe
			window.open(urlDestination, '_blank');
		} else {
			if (frame_destination === null) {
				// pas de frame
				if (window.location.href.split('?')[1] != urlDestination.split('?')[1]) {
					window.location.href = urlDestination;
				}
			} else {
				// gestion de la navigation par frame
				if (frame_destination.src.split('?')[1] != urlDestination.split('?')[1]) {
					frame_destination.src = urlDestination;
				}
			}
		}
	}

	function createThemeMenuMobileFS() {

		// Modification des couleurs du menu à partir du json
		initMenuColors();

	    // récupération du temps d'attente pour le chargement de la frame au chargement de la page (en ms)
	    if ((typeof json_theme_mobile_fs["timeout"] !== undefined) && !isNaN(json_theme_mobile_fs["timeout"])) {
	      waitForLoadingFrame = json_theme_mobile_fs["timeout"];
	    }

	    // creation de la frame
	    let menu_id = document.getElementById('i_frame');

	    if ((typeof json_theme_mobile_fs["iframe"] !== undefined) && (json_theme_mobile_fs["iframe"] === "yes")) {
	      // iframe pour afficher la page courante
	      let menu_f = document.createElement("div");
	      menu_f.className = "menuf";
	      let menu_iframe = document.createElement("iframe");
	      menu_iframe.id = "iframe_a";
	      let frameWidth = defaultFrameWidth;
	      if (typeof (json_theme_mobile_fs["frameWidth"]) !== "undefined") {
	        menu_iframe.width = json_theme_mobile_fs["frameWidth"];
	      }
	      let frameHeight = defaultIframHeight;
	      if (typeof (json_theme_mobile_fs["frameHeight"]) !== "undefined") {
	        menu_iframe.height = json_theme_mobile_fs["frameHeight"];
	      }
	      menu_iframe.frameBorder = "0";
	      menu_iframe.scrolling = "no";
	      menu_iframe.src = "";

	      menu_f.appendChild(menu_iframe);
	      menu_id.appendChild(menu_f);
	    }
		
		let menu_items = document.getElementById('menu_items');

		for (let i = 0; i < json_theme_mobile_fs["page"].length; i++) {
			let item = document.createElement("li");
			item.className="menu__group";
			let item_link = document.createElement("a");
			let link = json_theme_mobile_fs["page"][i]["link"];
			if (homeLink === "") {
				homeLink = link;
			}
			item_link.setAttribute("onclick", "gotoPlan(" + link + ")");
			item_link.className = "r-link menu__link";
			item_link.text = json_theme_mobile_fs["page"][i]["label"]
			item.append(item_link);
			menu_items.append(item);
		} 
	};

	// creation dynamique du menu Mobile Fullscreen
	createThemeMenuMobileFS();

	(function () {
		'use strict';

		class Menu {
			constructor(settings) {
				this.menuNode = settings.menuNode;
			}

			toggleMenuState(className) {
				if (typeof className !== 'string' || className.length === 0) {
					return console.log('you did not give the class for toggleState function');
				}
				return this.menuNode.classList.toggle(className);
			}
		}

		const jsMenuNode = document.querySelector('.menu');
		const fsMenu = new Menu({
			menuNode: jsMenuNode
		});

		function callMenuToggle(event) {
			fsMenu.toggleMenuState('menu_activated');
		}

		jsMenuNode.querySelector('.menu__hamburger').addEventListener('click', callMenuToggle);
	})();

</script>
